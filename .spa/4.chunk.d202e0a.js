/*! For license information please see 4.chunk.d202e0a.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"./docs/.docbook/articles/assets/ast-1.png":function(module,exports,__webpack_require__){eval('module.exports = __webpack_require__.p + "assets/ast-1.png?4cd89b98d5a10761d455da212d97cd8f";\n\n//# sourceURL=webpack:///./docs/.docbook/articles/assets/ast-1.png?')},"./docs/.docbook/articles/ast-解析-react-组件.md":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _ast_react_md_vue_type_template_id_016e1928___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ast-解析-react-组件.md?vue&type=template&id=016e1928& */ "./docs/.docbook/articles/ast-解析-react-组件.md?vue&type=template&id=016e1928&");\n/* harmony import */ var _ast_react_md_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ast-解析-react-组件.md?vue&type=script&lang=js& */ "./docs/.docbook/articles/ast-解析-react-组件.md?vue&type=script&lang=js&");\n/* empty/unused harmony star reexport *//* harmony import */ var _node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js */ "./node_modules/vue-loader/lib/runtime/componentNormalizer.js");\n\n\n\n\n\n/* normalize component */\n\nvar component = Object(_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__["default"])(\n  _ast_react_md_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__["default"],\n  _ast_react_md_vue_type_template_id_016e1928___WEBPACK_IMPORTED_MODULE_0__["render"],\n  _ast_react_md_vue_type_template_id_016e1928___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* harmony default export */ __webpack_exports__["default"] = (component.exports);\n\n//# sourceURL=webpack:///./docs/.docbook/articles/ast-%E8%A7%A3%E6%9E%90-react-%E7%BB%84%E4%BB%B6.md?')},"./docs/.docbook/articles/ast-解析-react-组件.md?vue&type=script&lang=js&":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_happypack_loader_js_id_babel_node_modules_vue_loader_lib_index_js_ref_2_0_node_modules_vue_md_loader_index_js_ref_2_1_ast_react_md_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../node_modules/happypack/loader.js?id=babel!../../../node_modules/vue-loader/lib??ref--2-0!../../../node_modules/vue-md-loader??ref--2-1!./ast-解析-react-组件.md?vue&type=script&lang=js& */ "./node_modules/happypack/loader.js?id=babel!./node_modules/vue-loader/lib/index.js?!./node_modules/vue-md-loader/index.js?!./docs/.docbook/articles/ast-解析-react-组件.md?vue&type=script&lang=js&");\n/* empty/unused harmony star reexport */ /* harmony default export */ __webpack_exports__["default"] = (_node_modules_happypack_loader_js_id_babel_node_modules_vue_loader_lib_index_js_ref_2_0_node_modules_vue_md_loader_index_js_ref_2_1_ast_react_md_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__["default"]); \n\n//# sourceURL=webpack:///./docs/.docbook/articles/ast-%E8%A7%A3%E6%9E%90-react-%E7%BB%84%E4%BB%B6.md?')},"./docs/.docbook/articles/ast-解析-react-组件.md?vue&type=template&id=016e1928&":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_ref_2_0_node_modules_vue_md_loader_index_js_ref_2_1_ast_react_md_vue_type_template_id_016e1928___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/vue-loader/lib??ref--2-0!../../../node_modules/vue-md-loader??ref--2-1!./ast-解析-react-组件.md?vue&type=template&id=016e1928& */ "./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/vue-loader/lib/index.js?!./node_modules/vue-md-loader/index.js?!./docs/.docbook/articles/ast-解析-react-组件.md?vue&type=template&id=016e1928&");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "render", function() { return _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_ref_2_0_node_modules_vue_md_loader_index_js_ref_2_1_ast_react_md_vue_type_template_id_016e1928___WEBPACK_IMPORTED_MODULE_0__["render"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_ref_2_0_node_modules_vue_md_loader_index_js_ref_2_1_ast_react_md_vue_type_template_id_016e1928___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });\n\n\n\n//# sourceURL=webpack:///./docs/.docbook/articles/ast-%E8%A7%A3%E6%9E%90-react-%E7%BB%84%E4%BB%B6.md?')},"./node_modules/happypack/loader.js?id=babel!./node_modules/vue-loader/lib/index.js?!./node_modules/vue-md-loader/index.js?!./docs/.docbook/articles/ast-解析-react-组件.md?vue&type=script&lang=js&":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n/* harmony default export */ __webpack_exports__["default"] = ({\n  components: {}\n});\n\n//# sourceURL=webpack:///./docs/.docbook/articles/ast-%E8%A7%A3%E6%9E%90-react-%E7%BB%84%E4%BB%B6.md?./node_modules/happypack/loader.js?id=babel!./node_modules/vue-loader/lib??ref--2-0!./node_modules/vue-md-loader??ref--2-1')},"./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/vue-loader/lib/index.js?!./node_modules/vue-md-loader/index.js?!./docs/.docbook/articles/ast-解析-react-组件.md?vue&type=template&id=016e1928&":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "render", function() { return render; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'section\',[_c(\'h1\',{attrs:{"id":"使用-ast-解析-react-typescript-component-接口定义"}},[_vm._v("使用 AST 解析 React TypeScript Component 接口定义 "),_c(\'a\',{staticClass:"header-anchor",attrs:{"href":"#使用-ast-解析-react-typescript-component-接口定义"}})]),_vm._v(" "),_c(\'h2\',{attrs:{"id":"背景"}},[_vm._v("背景 "),_c(\'a\',{staticClass:"header-anchor",attrs:{"href":"#背景"}})]),_vm._v(" "),_c(\'p\',[_vm._v("假设团队使用 TypeScript 进行 React 组件开发。开发组件的同时，需要为组件撰写文档（使用 Markdown 编写文档）。文档中需要对组件的 props 定义进行说明。")]),_vm._v(" "),_c(\'p\',[_c(\'img\',{attrs:{"src":__webpack_require__(/*! ./assets/ast-1.png */ "./docs/.docbook/articles/assets/ast-1.png"),"alt":"Antd 组件的 API 说明"}})]),_vm._v(" "),_c(\'p\',[_vm._v("在开发组件的时候，是编写组件 props 的接口定义。这时候就希望能够偷懒了，直接抽取组件源代码中的接口定义和注释来生成这部分文档。")]),_vm._v(" "),_c(\'h2\',{attrs:{"id":"分析"}},[_vm._v("分析 "),_c(\'a\',{staticClass:"header-anchor",attrs:{"href":"#分析"}})]),_vm._v(" "),_c(\'p\',[_vm._v("基于上面背景进行分析，可以发现核心需求是抽取组件接口定义和注释形成特定格式的文档。")]),_vm._v(" "),_c(\'pre\',{pre:true},[_c(\'code\',{pre:true,attrs:{"v-pre":"","class":"language-ts"}},[_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("import")]),_vm._v(" React "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("from")]),_vm._v(" "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"react\\"")]),_vm._v(";\\n\\n"),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("export")]),_vm._v(" "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("interface")]),_vm._v(" IProps {\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-comment"}},[_vm._v("// 文字")]),_vm._v("\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("text")]),_vm._v(": "),_c(\'span\',{pre:true,attrs:{"class":"hljs-built_in"}},[_vm._v("string")]),_vm._v(";\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-comment"}},[_vm._v("// 点击事件")]),_vm._v("\\n  onClick: "),_c(\'span\',{pre:true,attrs:{"class":"hljs-function"}},[_vm._v("() =>")]),_vm._v(" "),_c(\'span\',{pre:true,attrs:{"class":"hljs-built_in"}},[_vm._v("void")]),_vm._v(";\\n}\\n\\n"),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("const")]),_vm._v(" Button = "),_c(\'span\',{pre:true,attrs:{"class":"hljs-function"}},[_vm._v("("),_c(\'span\',{pre:true,attrs:{"class":"hljs-params"}},[_vm._v("{ text }")]),_vm._v(") =>")]),_vm._v(" {\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("return")]),_vm._v(" "),_c(\'span\',{pre:true,attrs:{"class":"xml"}},[_c(\'span\',{pre:true,attrs:{"class":"hljs-tag"}},[_vm._v("<"),_c(\'span\',{pre:true,attrs:{"class":"hljs-name"}},[_vm._v("button")]),_vm._v(">")]),_vm._v("{text}"),_c(\'span\',{pre:true,attrs:{"class":"hljs-tag"}},[_vm._v("</"),_c(\'span\',{pre:true,attrs:{"class":"hljs-name"}},[_vm._v("button")]),_vm._v(">")])]),_vm._v(";\\n};\\n\\n"),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("export")]),_vm._v(" "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("default")]),_vm._v(" Button;\\n")])]),_vm._v(" "),_c(\'p\',[_vm._v("其实就是抽取 "),_c(\'code\',{pre:true},[_vm._v("IProps")]),_vm._v(" 定义然后转换成其他格式文档。")]),_vm._v(" "),_c(\'h2\',{attrs:{"id":"思路"}},[_vm._v("思路 "),_c(\'a\',{staticClass:"header-anchor",attrs:{"href":"#思路"}})]),_vm._v(" "),_c(\'p\',[_vm._v("在人人都说 "),_c(\'code\',{pre:true},[_vm._v("AST")]),_vm._v(" 的今天，我们肯定是要使用 "),_c(\'code\',{pre:true},[_vm._v("AST")]),_vm._v(" 来完成。")]),_vm._v(" "),_c(\'ol\',[_c(\'li\',[_vm._v("将源代码转换成 "),_c(\'code\',{pre:true},[_vm._v("AST")])]),_vm._v(" "),_c(\'li\',[_vm._v("遍历 "),_c(\'code\',{pre:true},[_vm._v("AST")]),_vm._v(" 抽取 "),_c(\'code\',{pre:true},[_vm._v("interface")]),_vm._v(" 定义")]),_vm._v(" "),_c(\'li\',[_vm._v("继续遍历 "),_c(\'code\',{pre:true},[_vm._v("interface")]),_vm._v(" 抽取各个字段定义 "),_c(\'code\',{pre:true},[_vm._v("definition")])])]),_vm._v(" "),_c(\'pre\',{pre:true},[_c(\'code\',{pre:true,attrs:{"v-pre":"","class":"language-shell"}},[_vm._v("code -> ast -> interface -> definitions\\n")])]),_vm._v(" "),_c(\'h2\',{attrs:{"id":"源代码-ast"}},[_vm._v("源代码 -> "),_c(\'code\',{pre:true},[_vm._v("AST")]),_vm._v(" "),_c(\'a\',{staticClass:"header-anchor",attrs:{"href":"#源代码-ast"}})]),_vm._v(" "),_c(\'p\',[_vm._v("站在巨人的肩膀上，使用 "),_c(\'code\',{pre:true},[_vm._v("babel")]),_vm._v(" 解析源代码即可。")]),_vm._v(" "),_c(\'pre\',{pre:true},[_c(\'code\',{pre:true,attrs:{"v-pre":"","class":"language-js"}},[_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("const")]),_vm._v(" parser = "),_c(\'span\',{pre:true,attrs:{"class":"hljs-built_in"}},[_vm._v("require")]),_vm._v("("),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"@babel/parser\\"")]),_vm._v(");\\n\\n"),_c(\'span\',{pre:true,attrs:{"class":"hljs-function"}},[_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("function")]),_vm._v(" "),_c(\'span\',{pre:true,attrs:{"class":"hljs-title"}},[_vm._v("transformCode2Ast")]),_vm._v("("),_c(\'span\',{pre:true,attrs:{"class":"hljs-params"}},[_vm._v("code")]),_vm._v(") ")]),_vm._v("{\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("return")]),_vm._v(" parser.parse(code, {\\n    "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("sourceType")]),_vm._v(": "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"module\\"")]),_vm._v(",\\n    "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("plugins")]),_vm._v(": [\\n      "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"jsx\\"")]),_vm._v(",\\n      "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"typescript\\"")]),_vm._v(",\\n      "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"asyncGenerators\\"")]),_vm._v(",\\n      "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"bigInt\\"")]),_vm._v(",\\n      "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"classProperties\\"")]),_vm._v(",\\n      "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"classPrivateProperties\\"")]),_vm._v(",\\n      "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"classPrivateMethods\\"")]),_vm._v(",\\n      ["),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"decorators\\"")]),_vm._v(", { "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("decoratorsBeforeExport")]),_vm._v(": "),_c(\'span\',{pre:true,attrs:{"class":"hljs-literal"}},[_vm._v("false")]),_vm._v(" }],\\n      "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"doExpressions\\"")]),_vm._v(",\\n      "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"dynamicImport\\"")]),_vm._v(",\\n      "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"exportDefaultFrom\\"")]),_vm._v(",\\n      "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"exportNamespaceFrom\\"")]),_vm._v(",\\n      "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"functionBind\\"")]),_vm._v(",\\n      "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"functionSent\\"")]),_vm._v(",\\n      "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"importMeta\\"")]),_vm._v(",\\n      "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"logicalAssignment\\"")]),_vm._v(",\\n      "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"nullishCoalescingOperator\\"")]),_vm._v(",\\n      "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"numericSeparator\\"")]),_vm._v(",\\n      "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"objectRestSpread\\"")]),_vm._v(",\\n      "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"optionalCatchBinding\\"")]),_vm._v(",\\n      "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"optionalChaining\\"")]),_vm._v(",\\n      ["),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"pipelineOperator\\"")]),_vm._v(", { "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("proposal")]),_vm._v(": "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"minimal\\"")]),_vm._v(" }],\\n      "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"throwExpressions\\"")]),_vm._v(",\\n      "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"topLevelAwait\\"")]),_vm._v(",\\n      "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"estree\\"")]),_vm._v(",\\n    ],\\n  });\\n}\\n")])]),_vm._v(" "),_c(\'p\',[_vm._v("转换上面的 Button 组件，"),_c(\'code\',{pre:true},[_vm._v("AST")]),_vm._v(" 大概长这样：")]),_vm._v(" "),_c(\'pre\',{pre:true},[_c(\'code\',{pre:true,attrs:{"v-pre":"","class":"language-js"}},[_vm._v("Node {\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("type")]),_vm._v(": "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\'File\'")]),_vm._v(",\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("start")]),_vm._v(": "),_c(\'span\',{pre:true,attrs:{"class":"hljs-number"}},[_vm._v("0")]),_vm._v(",\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("end")]),_vm._v(": "),_c(\'span\',{pre:true,attrs:{"class":"hljs-number"}},[_vm._v("207")]),_vm._v(",\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("loc")]),_vm._v(":\\n   SourceLocation {\\n     "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("start")]),_vm._v(": Position { "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("line")]),_vm._v(": "),_c(\'span\',{pre:true,attrs:{"class":"hljs-number"}},[_vm._v("1")]),_vm._v(", "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("column")]),_vm._v(": "),_c(\'span\',{pre:true,attrs:{"class":"hljs-number"}},[_vm._v("0")]),_vm._v(" },\\n     "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("end")]),_vm._v(": Position { "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("line")]),_vm._v(": "),_c(\'span\',{pre:true,attrs:{"class":"hljs-number"}},[_vm._v("16")]),_vm._v(", "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("column")]),_vm._v(": "),_c(\'span\',{pre:true,attrs:{"class":"hljs-number"}},[_vm._v("0")]),_vm._v(" } },\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("errors")]),_vm._v(": [],\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("program")]),_vm._v(":\\n   Node {\\n     "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("type")]),_vm._v(": "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\'Program\'")]),_vm._v(",\\n     "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("start")]),_vm._v(": "),_c(\'span\',{pre:true,attrs:{"class":"hljs-number"}},[_vm._v("0")]),_vm._v(",\\n     "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("end")]),_vm._v(": "),_c(\'span\',{pre:true,attrs:{"class":"hljs-number"}},[_vm._v("207")]),_vm._v(",\\n     "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("loc")]),_vm._v(": SourceLocation { "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("start")]),_vm._v(": [Position], "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("end")]),_vm._v(": [Position] },\\n     "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("sourceType")]),_vm._v(": "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\'module\'")]),_vm._v(",\\n     "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("interpreter")]),_vm._v(": "),_c(\'span\',{pre:true,attrs:{"class":"hljs-literal"}},[_vm._v("null")]),_vm._v(",\\n     "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("body")]),_vm._v(": [ [Node], [Node], [Node], [Node] ] },\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("comments")]),_vm._v(":\\n   [ { "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("type")]),_vm._v(": "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\'CommentLine\'")]),_vm._v(",\\n       "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("value")]),_vm._v(": "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\' 文字\'")]),_vm._v(",\\n       "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("start")]),_vm._v(": "),_c(\'span\',{pre:true,attrs:{"class":"hljs-number"}},[_vm._v("57")]),_vm._v(",\\n       "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("end")]),_vm._v(": "),_c(\'span\',{pre:true,attrs:{"class":"hljs-number"}},[_vm._v("62")]),_vm._v(",\\n       "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("loc")]),_vm._v(": [SourceLocation] },\\n     { "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("type")]),_vm._v(": "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\'CommentLine\'")]),_vm._v(",\\n       "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("value")]),_vm._v(": "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\' 点击事件\'")]),_vm._v(",\\n       "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("start")]),_vm._v(": "),_c(\'span\',{pre:true,attrs:{"class":"hljs-number"}},[_vm._v("81")]),_vm._v(",\\n       "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("end")]),_vm._v(": "),_c(\'span\',{pre:true,attrs:{"class":"hljs-number"}},[_vm._v("88")]),_vm._v(",\\n       "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("loc")]),_vm._v(": [SourceLocation] } ] }\\n")])]),_vm._v(" "),_c(\'h2\',{attrs:{"id":"遍历-ast"}},[_vm._v("遍历 "),_c(\'code\',{pre:true},[_vm._v("AST")]),_vm._v(" "),_c(\'a\',{staticClass:"header-anchor",attrs:{"href":"#遍历-ast"}})]),_vm._v(" "),_c(\'p\',[_vm._v("同样站在巨人的肩膀上，使用 "),_c(\'code\',{pre:true},[_vm._v("ast-types")]),_vm._v(" 对 "),_c(\'code\',{pre:true},[_vm._v("ast")]),_vm._v(" 进行遍历。")]),_vm._v(" "),_c(\'pre\',{pre:true},[_c(\'code\',{pre:true,attrs:{"v-pre":"","class":"language-ts"}},[_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("const")]),_vm._v(" { visit } = "),_c(\'span\',{pre:true,attrs:{"class":"hljs-built_in"}},[_vm._v("require")]),_vm._v("("),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"ast-types\\"")]),_vm._v(");\\n\\n"),_c(\'span\',{pre:true,attrs:{"class":"hljs-function"}},[_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("function")]),_vm._v(" "),_c(\'span\',{pre:true,attrs:{"class":"hljs-title"}},[_vm._v("findInterface")]),_vm._v("("),_c(\'span\',{pre:true,attrs:{"class":"hljs-params"}},[_vm._v("ast")]),_vm._v(") ")]),_vm._v("{\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("let")]),_vm._v(" ret = "),_c(\'span\',{pre:true,attrs:{"class":"hljs-built_in"}},[_vm._v("Object")]),_vm._v(".create("),_c(\'span\',{pre:true,attrs:{"class":"hljs-literal"}},[_vm._v("null")]),_vm._v(");\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("let")]),_vm._v(" currentInterface = "),_c(\'span\',{pre:true,attrs:{"class":"hljs-literal"}},[_vm._v("null")]),_vm._v(";\\n\\n  visit(ast, {\\n    "),_c(\'span\',{pre:true,attrs:{"class":"hljs-function"}},[_c(\'span\',{pre:true,attrs:{"class":"hljs-title"}},[_vm._v("visitTSInterfaceDeclaration")]),_vm._v("("),_c(\'span\',{pre:true,attrs:{"class":"hljs-params"}},[_vm._v("nodePath")]),_vm._v(")")]),_vm._v(" {\\n      currentInterface = nodePath.value.id.name;\\n      "),_c(\'span\',{pre:true,attrs:{"class":"hljs-built_in"}},[_vm._v("this")]),_vm._v(".traverse(nodePath);\\n    },\\n    "),_c(\'span\',{pre:true,attrs:{"class":"hljs-function"}},[_c(\'span\',{pre:true,attrs:{"class":"hljs-title"}},[_vm._v("visitTSPropertySignature")]),_vm._v("("),_c(\'span\',{pre:true,attrs:{"class":"hljs-params"}},[_vm._v("nodePath")]),_vm._v(")")]),_vm._v(" {\\n      ret[currentInterface] = ret[currentInterface] || [];\\n      ret[currentInterface].push(nodePath.value);\\n      "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("return")]),_vm._v(" "),_c(\'span\',{pre:true,attrs:{"class":"hljs-literal"}},[_vm._v("false")]),_vm._v(";\\n    },\\n  });\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("return")]),_vm._v(" ret;\\n}\\n")])]),_vm._v(" "),_c(\'p\',[_vm._v("对 "),_c(\'code\',{pre:true},[_vm._v("AST")]),_vm._v(" 遍历抽取 "),_c(\'code\',{pre:true},[_vm._v("Interface")]),_vm._v(" 后的结果大概长这样。")]),_vm._v(" "),_c(\'pre\',{pre:true},[_c(\'code\',{pre:true,attrs:{"v-pre":"","class":"language-js"}},[_vm._v("Node {\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("type")]),_vm._v(": "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\'TSPropertySignature\'")]),_vm._v(",\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("start")]),_vm._v(": "),_c(\'span\',{pre:true,attrs:{"class":"hljs-number"}},[_vm._v("65")]),_vm._v(",\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("end")]),_vm._v(": "),_c(\'span\',{pre:true,attrs:{"class":"hljs-number"}},[_vm._v("78")]),_vm._v(",\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("loc")]),_vm._v(": [SourceLocation],\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("key")]),_vm._v(": [Node],\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("computed")]),_vm._v(": "),_c(\'span\',{pre:true,attrs:{"class":"hljs-literal"}},[_vm._v("false")]),_vm._v(",\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("typeAnnotation")]),_vm._v(": [Node],\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("leadingComments")]),_vm._v(": ["),_c(\'span\',{pre:true,attrs:{"class":"hljs-built_in"}},[_vm._v("Array")]),_vm._v("],\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("trailingComments")]),_vm._v(": ["),_c(\'span\',{pre:true,attrs:{"class":"hljs-built_in"}},[_vm._v("Array")]),_vm._v("] },\\nNode {\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("type")]),_vm._v(": "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\'TSPropertySignature\'")]),_vm._v(",\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("start")]),_vm._v(": "),_c(\'span\',{pre:true,attrs:{"class":"hljs-number"}},[_vm._v("91")]),_vm._v(",\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("end")]),_vm._v(": "),_c(\'span\',{pre:true,attrs:{"class":"hljs-number"}},[_vm._v("111")]),_vm._v(",\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("loc")]),_vm._v(": [SourceLocation],\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("key")]),_vm._v(": [Node],\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("computed")]),_vm._v(": "),_c(\'span\',{pre:true,attrs:{"class":"hljs-literal"}},[_vm._v("false")]),_vm._v(",\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("typeAnnotation")]),_vm._v(": [Node],\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("leadingComments")]),_vm._v(": ["),_c(\'span\',{pre:true,attrs:{"class":"hljs-built_in"}},[_vm._v("Array")]),_vm._v("] } ] }\\n")])]),_vm._v(" "),_c(\'p\',[_vm._v("会发现各个定义在 "),_c(\'code\',{pre:true},[_vm._v("typeAnnotation")]),_vm._v(" 中，这时候对它进行解析即可。")]),_vm._v(" "),_c(\'h2\',{attrs:{"id":"解析-typeannotation"}},[_vm._v("解析 TypeAnnotation "),_c(\'a\',{staticClass:"header-anchor",attrs:{"href":"#解析-typeannotation"}})]),_vm._v(" "),_c(\'p\',[_vm._v("通过分析 "),_c(\'code\',{pre:true},[_vm._v("typeAnnotation")]),_vm._v(" 很容易写出。")]),_vm._v(" "),_c(\'pre\',{pre:true},[_c(\'code\',{pre:true,attrs:{"v-pre":"","class":"language-js"}},[_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("const")]),_vm._v(" get = "),_c(\'span\',{pre:true,attrs:{"class":"hljs-built_in"}},[_vm._v("require")]),_vm._v("("),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"lodash/get\\"")]),_vm._v(");\\n\\n"),_c(\'span\',{pre:true,attrs:{"class":"hljs-function"}},[_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("function")]),_vm._v(" "),_c(\'span\',{pre:true,attrs:{"class":"hljs-title"}},[_vm._v("parseTSTypeReference")]),_vm._v("("),_c(\'span\',{pre:true,attrs:{"class":"hljs-params"}},[_vm._v("typeName")]),_vm._v(") ")]),_vm._v("{\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("const")]),_vm._v(" type = get(typeName, "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"type\\"")]),_vm._v(");\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("switch")]),_vm._v(" (type) {\\n    "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("case")]),_vm._v(" "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"TSQualifiedName\\"")]),_vm._v(":\\n      "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("return")]),_vm._v(" "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("`"),_c(\'span\',{pre:true,attrs:{"class":"hljs-subst"}},[_vm._v("${get(typeName, "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"left.name\\"")]),_vm._v(")}")]),_vm._v("."),_c(\'span\',{pre:true,attrs:{"class":"hljs-subst"}},[_vm._v("${get(typeName, "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"right.name\\"")]),_vm._v(")}")]),_vm._v("`")]),_vm._v(";\\n    "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("default")]),_vm._v(":\\n      "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("return")]),_vm._v(" "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("`Unknown ReferenceType`")]),_vm._v(";\\n  }\\n}\\n\\n"),_c(\'span\',{pre:true,attrs:{"class":"hljs-function"}},[_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("function")]),_vm._v(" "),_c(\'span\',{pre:true,attrs:{"class":"hljs-title"}},[_vm._v("parseTSFunctionType")]),_vm._v("("),_c(\'span\',{pre:true,attrs:{"class":"hljs-params"}},[_vm._v("parameters, typeAnnotation")]),_vm._v(") ")]),_vm._v("{\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("const")]),_vm._v(" parseTSFunctionParameters = "),_c(\'span\',{pre:true,attrs:{"class":"hljs-function"}},[_vm._v("("),_c(\'span\',{pre:true,attrs:{"class":"hljs-params"}},[_vm._v("parameters")]),_vm._v(") =>")]),_vm._v(" {\\n    "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("if")]),_vm._v(" (!parameters || !parameters.length) {\\n      "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("return")]),_vm._v(" "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("`()`")]),_vm._v(";\\n    }\\n    "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("let")]),_vm._v(" args = parameters.map("),_c(\'span\',{pre:true,attrs:{"class":"hljs-function"}},[_vm._v("("),_c(\'span\',{pre:true,attrs:{"class":"hljs-params"}},[_vm._v("parameter")]),_vm._v(") =>")]),_vm._v(" {\\n      "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("return")]),_vm._v(" "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("`"),_c(\'span\',{pre:true,attrs:{"class":"hljs-subst"}},[_vm._v("${get(parameter, "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"name\\"")]),_vm._v(")}")]),_vm._v(": "),_c(\'span\',{pre:true,attrs:{"class":"hljs-subst"}},[_vm._v("${parseTypeAnnotation(\\n        get(parameter, "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"typeAnnotation.typeAnnotation\\"")]),_vm._v(")\\n      )}")]),_vm._v("`")]),_vm._v(";\\n    });\\n    "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("return")]),_vm._v(" "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"( \\"")]),_vm._v(" + args.join("),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\", \\"")]),_vm._v(") + "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\")\\"")]),_vm._v(";\\n  };\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("const")]),_vm._v(" parseTSFunctionReturn = "),_c(\'span\',{pre:true,attrs:{"class":"hljs-function"}},[_vm._v("("),_c(\'span\',{pre:true,attrs:{"class":"hljs-params"}},[_vm._v("typeAnnotation")]),_vm._v(") =>")]),_vm._v(" {\\n    "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("const")]),_vm._v(" type = get(typeAnnotation, "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"type\\"")]),_vm._v(");\\n    "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("switch")]),_vm._v(" (type) {\\n      "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("case")]),_vm._v(" "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"TSVoidKeyword\\"")]),_vm._v(":\\n        "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("return")]),_vm._v(" "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"void\\"")]),_vm._v(";\\n      "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("case")]),_vm._v(" "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"TSTypeReference\\"")]),_vm._v(":\\n        "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("return")]),_vm._v(" parseTSTypeReference(get(typeAnnotation, "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"typeName\\"")]),_vm._v("));\\n      "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("default")]),_vm._v(":\\n        "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("return")]),_vm._v(" "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("`Unknown FunctionType`")]),_vm._v(";\\n    }\\n  };\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("return")]),_vm._v(" "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("`"),_c(\'span\',{pre:true,attrs:{"class":"hljs-subst"}},[_vm._v("${parseTSFunctionParameters(parameters)}")]),_vm._v(" => "),_c(\'span\',{pre:true,attrs:{"class":"hljs-subst"}},[_vm._v("${parseTSFunctionReturn(\\n    typeAnnotation\\n  )}")]),_vm._v("`")]),_vm._v(";\\n}\\n\\n"),_c(\'span\',{pre:true,attrs:{"class":"hljs-function"}},[_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("function")]),_vm._v(" "),_c(\'span\',{pre:true,attrs:{"class":"hljs-title"}},[_vm._v("parseTSTypeLiteral")]),_vm._v("("),_c(\'span\',{pre:true,attrs:{"class":"hljs-params"}},[_vm._v("members")]),_vm._v(") ")]),_vm._v("{\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("const")]),_vm._v(" ret = parseInterfaceDefinitions(members);\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("let")]),_vm._v(" args = ret.map("),_c(\'span\',{pre:true,attrs:{"class":"hljs-function"}},[_vm._v("("),_c(\'span\',{pre:true,attrs:{"class":"hljs-params"}},[_vm._v("t")]),_vm._v(") =>")]),_vm._v(" "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("`"),_c(\'span\',{pre:true,attrs:{"class":"hljs-subst"}},[_vm._v("${t.name}")]),_vm._v(": "),_c(\'span\',{pre:true,attrs:{"class":"hljs-subst"}},[_vm._v("${t.type}")]),_vm._v("`")]),_vm._v(");\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("return")]),_vm._v(" "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"{ \\"")]),_vm._v(" + args.join("),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\", \\"")]),_vm._v(") + "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\" }\\"")]),_vm._v(";\\n}\\n\\n"),_c(\'span\',{pre:true,attrs:{"class":"hljs-function"}},[_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("function")]),_vm._v(" "),_c(\'span\',{pre:true,attrs:{"class":"hljs-title"}},[_vm._v("parseTypeAnnotation")]),_vm._v("("),_c(\'span\',{pre:true,attrs:{"class":"hljs-params"}},[_vm._v("typeAnnotation")]),_vm._v(") ")]),_vm._v("{\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("const")]),_vm._v(" type = get(typeAnnotation, "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"type\\"")]),_vm._v(");\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("switch")]),_vm._v(" (type) {\\n    "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("case")]),_vm._v(" "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"TSNumberKeyword\\"")]),_vm._v(":\\n    "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("case")]),_vm._v(" "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"TSStringKeyword\\"")]),_vm._v(":\\n    "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("case")]),_vm._v(" "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"TSBoleanKeyword\\"")]),_vm._v(":\\n    "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("case")]),_vm._v(" "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"TSNullKeyword\\"")]),_vm._v(":\\n    "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("case")]),_vm._v(" "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"TSUndefinedKeyword\\"")]),_vm._v(":\\n    "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("case")]),_vm._v(" "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"TSSymbolKeyword\\"")]),_vm._v(":\\n    "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("case")]),_vm._v(" "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"TSAnyKeyword\\"")]),_vm._v(":\\n      "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("return")]),_vm._v(" type.match("),_c(\'span\',{pre:true,attrs:{"class":"hljs-regexp"}},[_vm._v("/TS(\\\\w+)Keyword/")]),_vm._v(")["),_c(\'span\',{pre:true,attrs:{"class":"hljs-number"}},[_vm._v("1")]),_vm._v("].toLowerCase();\\n    "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("case")]),_vm._v(" "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"TSUnionType\\"")]),_vm._v(":\\n      "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("return")]),_vm._v(" get(typeAnnotation, "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"types\\"")]),_vm._v(", [])\\n        .map("),_c(\'span\',{pre:true,attrs:{"class":"hljs-function"}},[_vm._v("("),_c(\'span\',{pre:true,attrs:{"class":"hljs-params"}},[_vm._v("type")]),_vm._v(") =>")]),_vm._v(" get(type, "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"literal.value\\"")]),_vm._v("))\\n        .join("),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\" | \\"")]),_vm._v(");\\n    "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("case")]),_vm._v(" "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"TSFunctionType\\"")]),_vm._v(":\\n      "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("return")]),_vm._v(" parseTSFunctionType(\\n        get(typeAnnotation, "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"parameters\\"")]),_vm._v("),\\n        get(typeAnnotation, "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"typeAnnotation.typeAnnotation\\"")]),_vm._v(")\\n      );\\n    "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("case")]),_vm._v(" "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"TSTypeReference\\"")]),_vm._v(":\\n      "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("return")]),_vm._v(" parseTSTypeReference(get(typeAnnotation, "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"typeName\\"")]),_vm._v("));\\n    "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("case")]),_vm._v(" "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"TSTypeLiteral\\"")]),_vm._v(":\\n      "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("return")]),_vm._v(" parseTSTypeLiteral(get(typeAnnotation, "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"members\\"")]),_vm._v("));\\n    "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("default")]),_vm._v(":\\n      "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("return")]),_vm._v(" "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"UnKnowType\\"")]),_vm._v(";\\n  }\\n}\\n\\n"),_c(\'span\',{pre:true,attrs:{"class":"hljs-function"}},[_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("function")]),_vm._v(" "),_c(\'span\',{pre:true,attrs:{"class":"hljs-title"}},[_vm._v("parseInterfaceDefinitions")]),_vm._v("("),_c(\'span\',{pre:true,attrs:{"class":"hljs-params"}},[_vm._v("nodePaths")]),_vm._v(") ")]),_vm._v("{\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("const")]),_vm._v(" parseInterfaceDefinitionsNode = "),_c(\'span\',{pre:true,attrs:{"class":"hljs-function"}},[_vm._v("("),_c(\'span\',{pre:true,attrs:{"class":"hljs-params"}},[_vm._v("nodePath")]),_vm._v(") =>")]),_vm._v(" {\\n    "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("const")]),_vm._v(" name = get(nodePath, "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"key.name\\"")]),_vm._v(");\\n    "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("const")]),_vm._v(" comments = get(nodePath, "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"leadingComments.0.value\\"")]),_vm._v(", "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"\\"")]),_vm._v(")\\n      .trim()\\n      .split("),_c(\'span\',{pre:true,attrs:{"class":"hljs-regexp"}},[_vm._v("/[\\\\r\\\\n]/")]),_vm._v(")\\n      .map("),_c(\'span\',{pre:true,attrs:{"class":"hljs-function"}},[_vm._v("("),_c(\'span\',{pre:true,attrs:{"class":"hljs-params"}},[_vm._v("str")]),_vm._v(") =>")]),_vm._v(" str.trim().replace("),_c(\'span\',{pre:true,attrs:{"class":"hljs-regexp"}},[_vm._v("/^\\\\*/g")]),_vm._v(", "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"\\"")]),_vm._v(").trim())\\n      .filter("),_c(\'span\',{pre:true,attrs:{"class":"hljs-built_in"}},[_vm._v("Boolean")]),_vm._v(");\\n    "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("const")]),_vm._v(" typeAnnotation = get(nodePath, "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"typeAnnotation.typeAnnotation\\"")]),_vm._v(");\\n    "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("const")]),_vm._v(" type = parseTypeAnnotation(typeAnnotation);\\n    "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("return")]),_vm._v(" { name, type, comments };\\n  };\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("return")]),_vm._v(" nodePaths.map(parseInterfaceDefinitionsNode);\\n}\\n")])]),_vm._v(" "),_c(\'p\',[_vm._v("至此，可以得到 "),_c(\'code\',{pre:true},[_vm._v("Button")]),_vm._v(" 的接口定义。")]),_vm._v(" "),_c(\'pre\',{pre:true},[_c(\'code\',{pre:true,attrs:{"v-pre":"","class":"language-js"}},[_vm._v("[\\n  [\\n    {\\n      "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("name")]),_vm._v(": "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"text\\"")]),_vm._v(",\\n      "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("type")]),_vm._v(": "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"string\\"")]),_vm._v(",\\n      "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("comments")]),_vm._v(": ["),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"文字\\"")]),_vm._v("],\\n    },\\n    {\\n      "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("name")]),_vm._v(": "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"onClick\\"")]),_vm._v(",\\n      "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("type")]),_vm._v(": "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"() => void\\"")]),_vm._v(",\\n      "),_c(\'span\',{pre:true,attrs:{"class":"hljs-attr"}},[_vm._v("comments")]),_vm._v(": ["),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"点击事件\\"")]),_vm._v("],\\n    },\\n  ],\\n];\\n")])]),_vm._v(" "),_c(\'p\',[_vm._v("接下来只要将解析后的结果转成想要的格式即可。")]),_vm._v(" "),_c(\'h2\',{attrs:{"id":"测试"}},[_vm._v("测试 "),_c(\'a\',{staticClass:"header-anchor",attrs:{"href":"#测试"}})]),_vm._v(" "),_c(\'pre\',{pre:true},[_c(\'code\',{pre:true,attrs:{"v-pre":"","class":"language-js"}},[_c(\'span\',{pre:true,attrs:{"class":"hljs-function"}},[_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("function")]),_vm._v(" "),_c(\'span\',{pre:true,attrs:{"class":"hljs-title"}},[_vm._v("parseTypeScriptComponentInterface")]),_vm._v("("),_c(\'span\',{pre:true,attrs:{"class":"hljs-params"}},[_vm._v("code")]),_vm._v(") ")]),_vm._v("{\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("let")]),_vm._v(" ast = transformCode2Ast(code);\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("let")]),_vm._v(" interfaces = findInterfaces(ast);\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("let")]),_vm._v(" definitions = "),_c(\'span\',{pre:true,attrs:{"class":"hljs-built_in"}},[_vm._v("Object")]),_vm._v(".keys(interfaces).reduce("),_c(\'span\',{pre:true,attrs:{"class":"hljs-function"}},[_vm._v("("),_c(\'span\',{pre:true,attrs:{"class":"hljs-params"}},[_vm._v("a, c")]),_vm._v(") =>")]),_vm._v(" {\\n    a[c] = a[c] || [];\\n    a[c].push(parseInterfaceDefinitions(interfaces[c]));\\n    "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("return")]),_vm._v(" a;\\n  }, "),_c(\'span\',{pre:true,attrs:{"class":"hljs-built_in"}},[_vm._v("Object")]),_vm._v(".create("),_c(\'span\',{pre:true,attrs:{"class":"hljs-literal"}},[_vm._v("null")]),_vm._v("));\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("return")]),_vm._v(" definitions;\\n}\\n\\n"),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("const")]),_vm._v(" code = "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("`\\nimport React from \'react\';\\n\\nexport interface IProps {\\n  /**\\n   * button \\n   * 显示文字\\n   */\\n  text: string;\\n  // 点击事件\\n  onClick: () => void;\\n  // 属性 3\\n  props3: (arg: any) => void;\\n  // 属性 4\\n  props4: (arg: { name: string, age: number }) => React.Node\\n}\\n\\nconst Button = ({ text }) => {\\n  return <button>{text}</button>;\\n};\\n\\nexport default Button;\\n`")]),_vm._v(";\\n\\n"),_c(\'span\',{pre:true,attrs:{"class":"hljs-keyword"}},[_vm._v("let")]),_vm._v(" ret = parseTypeScriptComponentInterface(code);\\n")])]),_vm._v(" "),_c(\'p\',[_vm._v("输出：")]),_vm._v(" "),_c(\'pre\',{pre:true},[_c(\'code\',{pre:true,attrs:{"v-pre":"","class":"language-js"}},[_vm._v("{\\n  "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"IProps\\"")]),_vm._v(": [\\n    [\\n      {\\n        "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"name\\"")]),_vm._v(": "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"text\\"")]),_vm._v(",\\n        "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"type\\"")]),_vm._v(": "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"string\\"")]),_vm._v(",\\n        "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"comments\\"")]),_vm._v(": [\\n          "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"button\\"")]),_vm._v(",\\n          "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"显示文字\\"")]),_vm._v("\\n        ]\\n      },\\n      {\\n        "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"name\\"")]),_vm._v(": "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"onClick\\"")]),_vm._v(",\\n        "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"type\\"")]),_vm._v(": "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"() => void\\"")]),_vm._v(",\\n        "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"comments\\"")]),_vm._v(": [\\n          "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"点击事件\\"")]),_vm._v("\\n        ]\\n      },\\n      {\\n        "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"name\\"")]),_vm._v(": "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"props3\\"")]),_vm._v(",\\n        "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"type\\"")]),_vm._v(": "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"( arg: any) => void\\"")]),_vm._v(",\\n        "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"comments\\"")]),_vm._v(": [\\n          "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"属性 3\\"")]),_vm._v("\\n        ]\\n      },\\n      {\\n        "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"name\\"")]),_vm._v(": "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"props4\\"")]),_vm._v(",\\n        "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"type\\"")]),_vm._v(": "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"( arg: { name: string, age: number }) => React.Node\\"")]),_vm._v(",\\n        "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"comments\\"")]),_vm._v(": [\\n          "),_c(\'span\',{pre:true,attrs:{"class":"hljs-string"}},[_vm._v("\\"属性 4\\"")]),_vm._v("\\n        ]\\n      }\\n    ]\\n  ]\\n}\\n")])]),_vm._v(" "),_c(\'p\',[_c(\'a\',{attrs:{"href":"https://github.com/fantasticit/parse-typescript-component-interface"}},[_vm._v("源代码地址")]),_vm._v("。")])])}]\n\n\n\n//# sourceURL=webpack:///./docs/.docbook/articles/ast-%E8%A7%A3%E6%9E%90-react-%E7%BB%84%E4%BB%B6.md?./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib??ref--2-0!./node_modules/vue-md-loader??ref--2-1')}}]);