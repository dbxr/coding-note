# 变量和参数

## 1. 变量定义

### 1.1 概念

变量的名字就是变量保存值的地方。引用变量的值就叫做变量替换。例如，`var` 是一个变量的名字，那么 `$var` 就是引用这个变量的值（注意：`$var` 是 `${var}` 的简写形式，在某些上下文中，可能无法使用简写）。

### 1.2 定义变量

定义变量时，变量名前不加 `$` 符号，如：`var=10`。

注意：

- 首字符必须为字母（a-z，A-Z）
- 中间不可以有空格，可以使用下划线（\_）
- 不能使用标点符号
- 不能使用 `bash` 中的关键字

## 2 使用变量

变量名前加 `$` 即可。

```shell
#!/bin/bash

a=10

echo $a
```

## 3 只读变量

使用 `readonly` 可以将变量定义为*只读*。

```shell
#!/bin/bash

a=10
readonly a
a=11 # bash: a: 只读变量
```

## 4 特殊变量

### 4.1 局部变量

这种变量只有在代码块或者函数中才可见。

### 4.2 环境变量

这种变量将影响用户接口和 shell 的行为。

在通常情况下，每个进程都有自己的“环境”，这个环境是由一组变量组成的，这些变量中存有进程可能需要引用的信息。在这种情况下，shell 与一个一般的进程没什么区别。

### 4.3 位置参数

从命令行传入到脚本的参数：$0, $1, $2...
$0 就是脚本文件自身的名字，$1 是第一个参数，$2 是第二个参数，$3 是第三个参数，然后是第四个。$9 之后的位置参数就必须用大括号括起来了，比如，${10}，${11}，${12}。

- $# ： 传递到脚本的参数个数
- $\* ： 以一个单字符串显示所有向脚本传递的参数。与位置变量不同,此选项参数可超过 9 个
- $$ ： 脚本运行的当前进程 ID 号
- $! ： 后台运行的最后一个进程的进程 ID 号
- $@ ： 与$#相同,但是使用时加引号,并在引号中返回每个参数
- $： 显示 shell 使用的当前选项,与 set 命令功能相同
- $? ： 显示最后命令的退出状态。 0 表示没有错误,其他任何值表明有错误。

```shell
#!/bin/bash

echo
echo "The name of the script is ${0}"

echo
if [ -n "$1" ]; then
  echo "Parameter #1 is $1"
fi

if [ -n "${10}" ]; then # 大于 $9 就必须用 {} 括起来
  echo "Parameter #10 is $10"
fi

echo "---------------------------"
echo "All the parameters are $*"

exit 0
```

将上面的代码保存为 `getParam.sh` ，使用命令 `bash getParam.sh 1 2 3 4 5 6 7 8 9 10` 运行，输出为：

```shell
The name of the script is getParam.sh

Parameter #1 is 1
Parameter #10 is 10
---------------------------
All the parameters are 1 2 3 4 5 6 7 8 9 10
```
